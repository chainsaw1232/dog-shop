<view class="container user-page">
  <view class="user-info-card">
    <image class="avatar" src="{{userInfo.avatarUrl}}" mode="aspectFill"></image>
    <view class="nickname" wx:if="{{userInfo.nickName && userInfo.nickName !== '汪汪用户'}}">{{userInfo.nickName}}</view>
    <button wx:else class="login-button" open-type="getUserInfo" bindtap="login">点击登录</button>
  </view>

  <view class="section-card order-section">
    <view class="section-header">
      <text class="section-title">我的订单</text>
      <view class="all-orders" bindtap="navigateToOrderList" data-type="all">
        全部订单 <image class="arrow-icon" src="/static/images/icons/arrow-right.png"></image>
      </view>
    </view>
    <view class="order-status-grid">
      <view class="order-status-item" bindtap="navigateToOrderList" data-type="unpaid">
        <image class="order-status-icon" src="{{orderStateIcons.unpaid}}"></image>
        <text>待付款</text>
        <view class="badge" wx:if="{{orderCount.unpaid > 0}}">{{orderCount.unpaid}}</view>
      </view>
      <view class="order-status-item" bindtap="navigateToOrderList" data-type="unshipped">
        <image class="order-status-icon" src="{{orderStateIcons.unshipped}}"></image>
        <text>待发货</text>
        <view class="badge" wx:if="{{orderCount.unshipped > 0}}">{{orderCount.unshipped}}</view>
      </view>
      <view class="order-status-item" bindtap="navigateToOrderList" data-type="shipped">
        <image class="order-status-icon" src="{{orderStateIcons.shipped}}"></image>
        <text>待收货</text>
        <view class="badge" wx:if="{{orderCount.shipped > 0}}">{{orderCount.shipped}}</view>
      </view>
      <view class="order-status-item" bindtap="navigateToOrderList" data-type="completed">
        <image class="order-status-icon" src="{{orderStateIcons.completed}}"></image>
        <text>已完成</text>
        </view>
      <view class="order-status-item" bindtap="navigateToOrderList" data-type="afterSale"> <image class="order-status-icon" src="{{orderStateIcons.afterSale}}"></image>
        <text>售后</text>
        <view class="badge" wx:if="{{orderCount.afterSale > 0}}">{{orderCount.afterSale}}</view>
      </view>
    </view>
  </view>

  <view class="section-card menu-section">
    <view class="menu-item" bindtap="navigateToAddress">
      <image class="menu-icon" src="{{menuIcons.address}}"></image>
      <text class="menu-text">收货地址</text>
      <image class="arrow-icon" src="/static/images/icons/arrow-right.png"></image>
    </view>
    <view class="menu-item" bindtap="navigateToCoupon">
      <image class="menu-icon" src="{{menuIcons.coupon}}"></image>
      <text class="menu-text">我的优惠券</text>
      <image class="arrow-icon" src="/static/images/icons/arrow-right.png"></image>
    </view>
    <view class="menu-item" bindtap="navigateToFavorite">
      <image class="menu-icon" src="{{menuIcons.favorite}}"></image>
      <text class="menu-text">我的收藏</text>
      <image class="arrow-icon" src="/static/images/icons/arrow-right.png"></image>
    </view>
    <view class="menu-item" bindtap="contactService">
      <image class="menu-icon" src="{{menuIcons.contactService}}"></image>
      <text class="menu-text">联系客服</text>
      <image class="arrow-icon" src="/static/images/icons/arrow-right.png"></image>
    </view>
    <view class="menu-item" bindtap="navigateToAbout">
      <image class="menu-icon" src="{{menuIcons.aboutUs}}"></image>
      <text class="menu-text">关于我们</text>
      <image class="arrow-icon" src="/static/images/icons/arrow-right.png"></image>
    </view>
  </view>

  <view class="section-card recommend-section" wx:if="{{recommendProducts.length > 0}}">
    <view class="section-header">
      <text class="section-title">为您推荐</text>
    </view>
    <view class="product-grid">
      <view class="product-item" wx:for="{{recommendProducts}}" wx:key="id" bindtap="navigateToDetail" data-id="{{item.id}}">
        <image class="product-image" src="{{item.imageUrl}}" mode="aspectFill"></image>
        <view class="product-name">{{item.name}}</view>
        <view class="product-price">¥{{item.price}}</view>
      </view>
    </view>
  </view>

</view>
